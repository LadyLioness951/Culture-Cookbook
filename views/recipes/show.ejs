<%- include('../partials/header') %>

<section class="show-recipes">
    <div>Recipes: </div>
    <div><%= recipe.name %></div>
    <div>Image: </div>
    <img src="<%= recipe.image %>">
    <div>Description: </div>
    <div><%= recipe.description %></div>
    <div>Ingredients: </div>
    <div><%= recipe.ingredients %></div>
    <div>Directions: </div>
    <div><%= recipe.directions %></div>
</section>
  
<form action="/recipes/<%= recipe._id %>/comments" method="POST">
    <input type="text" name="content">
    <button type="submit">Add Comment</button>
</form>

<% recipe.comments.forEach(function(comment) { %>
    <div class="comment">
      <%= comment.content %><br>
      <% if (comment.user.equals(user._id)) { %>
        <form action="/recipes/<%= recipe._id %>/comments/<%= comment._id %>?_method=DELETE" method="POST">
          <button type="submit">X</button>
        </form>
        <form action="/recipes/<%= recipe._id %>/comments/<%= comment._id %>?_method=PUT" method="POST">
          <input name="content" value="<%= comment.content %>">
          <button type="submit">Update Comment</button>
        </form>
      <% } %>
    </div>
  <% }) %>

<%- include('../partials/footer') %>